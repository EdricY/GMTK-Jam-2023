(()=>{var l={157:l=>{l.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="arrow-svg"><path stroke-linecap="round" stroke-linejoin="round" d="M12 19.5v-15m0 0l-6.75 6.75M12 4.5l6.75 6.75"></path></svg>'}},e={};function t(n){var u=e[n];if(void 0!==u)return u.exports;var r=e[n]={exports:{}};return l[n](r,r.exports,t),r.exports}t.n=l=>{var e=l&&l.__esModule?()=>l.default:()=>l;return t.d(e,{a:e}),e},t.d=(l,e)=>{for(var n in e)t.o(e,n)&&!t.o(l,n)&&Object.defineProperty(l,n,{enumerable:!0,get:e[n]})},t.o=(l,e)=>Object.prototype.hasOwnProperty.call(l,e),t.p="/dist/";var n={};(()=>{"use strict";t.d(n,{t:()=>q,T:()=>M});let l=0;class e{constructor(e,t,n){this.id=l++,this.div=document.createElement("div"),this.div.innerHTML=e,this.div.classList.add("cell-inner"),this.div.id="cell-"+this.id,this.div.style.translate=`calc(${n} * (100% + 10px)) calc(${t} * (100% + 10px))`,document.getElementById("grid-container").appendChild(this.div),this._val=e,this.val=e}get val(){return this._val}set val(l){this.div.setAttribute("data-val",l),this.div.innerHTML=l,this._val=l}setLoc(l,e){this.div.style.translate=`calc(${e} * (100% + 10px)) calc(${l} * (100% + 10px))`}setDirty(){setTimeout((()=>this.remove()),100)}remove(){this.div.remove()}}document.getElementById("timer");const u=[],r=document.getElementById("queue-container");function i(){for(;u.length;)u.pop(),r.removeChild(r.firstChild)}function s(l){u.unshift(l);const e=document.createElement("div");e.innerHTML=l,e.setAttribute("data-val",l),e.classList.add("queue-cell"),r.appendChild(e)}function o(l){return l[Math.floor(l.length*Math.random())]}const a=t.p+"4d66020fdcadf4b373760032973d9801.mp3",c=document.getElementById("level-dialog"),d=document.getElementById("win-dialog"),v=document.getElementById("credits-dialog"),h=new Audio(a);document.getElementById("reset-btn").addEventListener("click",(()=>{g.initLevel(),document.getElementById("reset-btn").classList.remove("pulse")})),document.getElementById("level-btn").addEventListener("click",(()=>{c.showModal()})),document.getElementById("level-dialog-close-btn").addEventListener("click",(()=>{c.close()})),document.getElementById("close-credits-btn").addEventListener("click",(()=>{v.close(),g.currentLevel=0,q()})),document.getElementById("classic-btn").addEventListener("click",(()=>{0!==g.currentLevel&&(g.currentLevel=0,q())})),document.getElementById("next-level-btn").addEventListener("click",(()=>{d.close(),g.goToNextLevel()})),document.querySelectorAll(".level-select-btn").forEach((l=>l.addEventListener("click",(()=>{const e=l.getAttribute("data-val");g.currentLevel=Number(e),g.initLevel(),c.close(),console.log(e)}))));const g=new class{_currentLevel=0;solvedLevels=new Set;get isClassicMode(){return 0===this._currentLevel}get currentLevel(){return this._currentLevel}set currentLevel(l){this._currentLevel=l,document.getElementById("title").innerHTML=0===l?"Classic Mode":"Level "+l}initLevel(){if(0===this._currentLevel)return void q();const l=f[this._currentLevel];M(l.startingGrid,l.queueVals,l.levelDirQueue)}completeCurrentLevel(){this.setLevelSolved(this.currentLevel),this.currentLevel===L?v.showModal():(d.showModal(),h.play())}setLevelSolved(l){this.solvedLevels.add(l),document.querySelector(`.level-select-btn[data-val="${l}"]`).classList.add("solved")}goToNextLevel(){this.currentLevel<L&&(this.currentLevel=this.currentLevel+1,this.initLevel())}};window.levelManager=g;const f=[null,{startingGrid:[[null,null,null,null],[null,null,1024,null],[null,null,null,null],[null,null,null,null]],queueVals:[1024],levelDirQueue:["⬅️"]},{startingGrid:[[null,null,null,null],[null,null,null,512],[null,null,null,null],[null,512,null,512]],queueVals:[512,2],levelDirQueue:["⬅️","⬇️"]},{startingGrid:[[2,4,null,256],[2,2,null,null],[2,512,null,null],[4,512,null,512]],queueVals:[256,2,2],levelDirQueue:["⬆️","⬇️","➡️"]},{startingGrid:[[256,null,null,512],[null,null,null,null],[512,256,null,null],[null,null,null,null]],queueVals:[512,2,2,2],levelDirQueue:["➡️","⬆️","⬅️","⬅️"]},{startingGrid:[[128,128,128,128],[128,128,128,128],[128,128,128,128],[128,128,128,null]],queueVals:[128,2,4,2],levelDirQueue:["➡️","⬆️","⬅️","⬇️"]},{startingGrid:[[512,512,2,null],[null,null,2,2],[null,null,2,2],[16,16,null,null]],queueVals:[2,2,2,1024],levelDirQueue:["⬇️","⬇️","⬅️","⬅️"]},{startingGrid:[[8,2,2,8],[2,2,2,2],[4,null,null,4],[1024,2,2,1024]],queueVals:[2,2,2,2],levelDirQueue:["⬅️","➡️","⬆️","⬅️"]},{startingGrid:[[256,null,null,null],[null,2,null,null],[null,16,2,512],[1024,16,4,4]],queueVals:[256,2,512,1024],levelDirQueue:["⬅️","⬆️","⬅️","⬆️"]},{startingGrid:[[1024,8,null,1024],[2,4,null,2],[4,8,null,4],[null,null,null,null]],queueVals:[8,8,2],levelDirQueue:["⬅️","⬇️","⬅️"]},{startingGrid:[[1024,512,256,128],[2,4,null,null],[4,null,null,null],[2,null,null,null]],queueVals:[128,2,2,2,2,4],levelDirQueue:["⬅️","➡️","⬇️","⬅️","⬅️","⬅️"]},{startingGrid:[[8,null,256,256],[null,128,128,4],[null,128,null,null],[2,null,null,4]],queueVals:[128,2,256,2,256,1024],levelDirQueue:["⬅️","⬇️","➡️","⬇️","⬆️","⬅️"]},{startingGrid:[[null,null,null,256],[null,64,64,null],[null,4,512,null],[null,null,null,null]],queueVals:[2,128,4,1024,8],levelDirQueue:["⬅️","⬆️","➡️","⬇️","⬅️"]},{startingGrid:[[64,null,null,32],[2,128,256,null],[8,null,8,64],[1024,null,512,null]],queueVals:[256,4,256,2,2],levelDirQueue:["⬅️","⬆️","⬇️","➡️","➡️"]},{startingGrid:[[null,32,null,32],[32,512,1024,2],[null,null,512,null],[32,null,null,null]],queueVals:[32,64,128,2],levelDirQueue:["⬅️","⬆️","⬇️","➡️"]}],L=f.length;var m=t(157),p=t.n(m);const y=[[null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null]];function E(){document.getElementById("direction-queue").innerHTML=k.map((l=>`<div class="${l}">${p()}</div>`)).join("")}window.grid=y,document.querySelectorAll(".grid-cell").forEach((l=>l.addEventListener("click",(()=>{const t=l.getAttribute("data-r"),n=l.getAttribute("data-c");if(y[t][n])return;const i=function(){const l=u.pop();return l?(r.firstChild.classList.add("shrink"),r.firstChild.addEventListener("animationend",(()=>{r.removeChild(r.firstChild)}),{once:!0}),l):null}();i&&(y[t][n]=new e(i,t,n),setTimeout((()=>{const l=b[k.shift()]?.(y);g.currentLevel||(k.push(w()),s(o([2,2,4]))),E(),g.isClassicMode||(l&&function(){for(let l=0;l<y.length;l++)for(let e=0;e<y[0].length;e++)if(2048===y[l][e]?.val)return!0;return!1}()?g.completeCurrentLevel():0!==k.length&&0!==u.length||document.getElementById("reset-btn").classList.add("pulse"))}),0))}))));const b={L:function(l){let e=!1;for(let t=0;t<l.length;t++)for(let n=0;n<l[0].length;n++){let u,r=l[t][n];if(!r)continue;for(let i=n+1;i<l[0].length;i++){if(l[t][i]&&l[t][i]?.val===r.val){e=!0,u=l[t][i],l[t][i]=null,r.val=r.val+r.val;break}if(l[t][i])break}let i=n;for(let u=n-1;u>=0&&!l[t][u];u--)e=!0,i=u;l[t][n]=null,l[t][i]=r,u?.setLoc(t,i),r?.setLoc(t,i),u?.setDirty()}return e},R:function(l){let e=!1;for(let t=0;t<l.length;t++)for(let n=l[0].length-1;n>=0;n--){let u,r=l[t][n];if(!r)continue;for(let i=n-1;i>=0;i--){if(l[t][i]&&l[t][i]?.val===r.val){e=!0,u=l[t][i],l[t][i]=null,r.val=r.val+r.val;break}if(l[t][i])break}let i=n;for(let u=n+1;u<l[0].length&&!l[t][u];u++)e=!0,i=u;l[t][n]=null,l[t][i]=r,u?.setLoc(t,i),r?.setLoc(t,i),u?.setDirty()}return e},D:function(l){let e=!1;for(let t=0;t<l[0].length;t++)for(let n=l.length-1;n>=0;n--){let u,r=l[n][t];if(!r)continue;for(let i=n-1;i>=0;i--){if(l[i][t]&&l[i][t]?.val===r.val){e=!0,u=l[i][t],l[i][t]=null,r.val=r.val+r.val;break}if(l[i][t])break}let i=n;for(let u=n+1;u<l.length&&!l[u][t];u++)e=!0,i=u;l[n][t]=null,l[i][t]=r,u?.setLoc(i,t),r?.setLoc(i,t),u?.setDirty()}return e},U:function(l){let e=!1;for(let t=0;t<l[0].length;t++)for(let n=0;n<l.length;n++){let u,r=l[n][t];if(!r)continue;for(let i=n+1;i<l.length;i++){if(l[i][t]&&l[i][t]?.val===r.val){e=!0,u=l[i][t],l[i][t]=null,r.val=r.val+r.val;break}if(l[i][t])break}let i=n;for(let u=n-1;u>=0&&!l[u][t];u--)e=!0,i=u;l[n][t]=null,l[i][t]=r,u?.setLoc(i,t),r?.setLoc(i,t),u?.setDirty()}return e}},D={"⬅️":"L","➡️":"R","⬇️":"D","⬆️":"U"};function w(){return o(["L","L","R","R","D","D","D","U"])}let k=[];function q(){for(let l=0;l<y.length;l++)for(let e=0;e<y[0].length;e++)y[l][e]&&y[l][e].remove(),y[l][e]=null;!function(){const l=[];for(let e=0;e<y.length;e++)for(let t=0;t<y[0].length;t++)null===y[e][t]&&l.push([e,t]);if(0===l.length)return;const t=l[Math.floor(Math.random()*l.length)];y[t[0]][t[1]]=new e(2,t[0],t[1])}(),i(),s(o([2,2,4])),s(o([2,2,4])),s(o([2,2,4])),k=[w(),w(),w()],E()}function M(l,t,n){for(let t=0;t<y.length;t++)for(let n=0;n<y[0].length;n++)y[t][n]&&(y[t][n].remove(),y[t][n]=null),l[t][n]&&(y[t][n]=new e(l[t][n],t,n));i(),t.forEach((l=>s(l))),k=n.map((l=>D[l])),E()}q()})()})();