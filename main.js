(()=>{var l={157:l=>{l.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="4" stroke="currentColor" class="arrow-svg"><path stroke-linecap="round" stroke-linejoin="round" d="M12 19.5v-15m0 0l-6.75 6.75M12 4.5l6.75 6.75"></path></svg>'}},e={};function n(t){var u=e[t];if(void 0!==u)return u.exports;var r=e[t]={exports:{}};return l[t](r,r.exports,n),r.exports}n.n=l=>{var e=l&&l.__esModule?()=>l.default:()=>l;return n.d(e,{a:e}),e},n.d=(l,e)=>{for(var t in e)n.o(e,t)&&!n.o(l,t)&&Object.defineProperty(l,t,{enumerable:!0,get:e[t]})},n.o=(l,e)=>Object.prototype.hasOwnProperty.call(l,e);var t={};(()=>{"use strict";n.d(t,{t:()=>Q,T:()=>V});let l=0;class e{constructor(e,n,t){this.id=l++,this.div=document.createElement("div"),this.div.innerHTML=e,this.div.classList.add("cell-inner"),this.div.id="cell-"+this.id,this.div.style.translate=`calc(${t} * (100% + 10px)) calc(${n} * (100% + 10px))`,document.getElementById("grid-container").appendChild(this.div),this._val=e,this.val=e}get val(){return this._val}set val(l){this.div.setAttribute("data-val",l),this.div.innerHTML=l,this._val=l}setLoc(l,e){this.div.style.translate=`calc(${e} * (100% + 10px)) calc(${l} * (100% + 10px))`}setDirty(){setTimeout((()=>this.remove()),100)}remove(){this.div.remove()}}const u=document.getElementById("level-dialog"),r=document.getElementById("win-dialog"),i=document.getElementById("credits-dialog"),s=document.getElementById("ding-audio");document.getElementById("reset-btn").addEventListener("click",(()=>{o.initLevel(),document.getElementById("reset-btn").classList.remove("pulse")})),document.getElementById("level-btn").addEventListener("click",(()=>{u.showModal()})),document.getElementById("level-dialog-close-btn").addEventListener("click",(()=>{u.close()})),document.getElementById("close-credits-btn").addEventListener("click",(()=>{i.close(),o.currentLevel=0,o.initLevel()})),document.getElementById("classic-btn").addEventListener("click",(()=>{0!==o.currentLevel&&(o.currentLevel=0,o.initLevel())})),document.getElementById("next-level-btn").addEventListener("click",(()=>{r.close(),o.goToNextLevel()})),document.querySelectorAll(".level-select-btn").forEach((l=>l.addEventListener("click",(()=>{const e=l.getAttribute("data-val");o.currentLevel=Number(e),o.initLevel(),u.close(),console.log(e)}))));const o=new class{_currentLevel=0;_score=0;solvedLevels=new Set;get score(){return this._score}set score(l){this._score=l,document.getElementById("score-box").innerHTML=l}get isClassicMode(){return 0===this._currentLevel}get currentLevel(){return this._currentLevel}set currentLevel(l){this._currentLevel=l,document.getElementById("title").innerHTML=0===l?"Classic Mode":"Level "+l}initLevel(){if(0===this._currentLevel)return Q(),this.score=0,void document.getElementById("score-box").classList.remove("hidden");console.log(document.getElementById("score-box")),document.getElementById("score-box").classList.add("hidden");const l=a[this._currentLevel];V(l.startingGrid,l.queueVals,l.levelDirQueue)}completeCurrentLevel(){this.setLevelSolved(this.currentLevel),this.currentLevel===c?(i.showModal(),s.currentTime=0,s.play()):(r.showModal(),s.currentTime=0,s.play())}setLevelSolved(l){this.solvedLevels.add(l),document.querySelector(`.level-select-btn[data-val="${l}"]`).classList.add("solved")}goToNextLevel(){this.currentLevel<c&&(this.currentLevel=this.currentLevel+1,this.initLevel())}};window.levelManager=o;const a=[null,{startingGrid:[[null,null,null,null],[null,null,1024,null],[null,null,null,null],[null,null,null,null]],queueVals:[1024],levelDirQueue:["⬅️"]},{startingGrid:[[null,null,null,null],[null,null,null,512],[null,null,null,null],[null,512,null,512]],queueVals:[512,2],levelDirQueue:["⬅️","⬇️"]},{startingGrid:[[2,4,null,256],[2,2,null,null],[2,512,null,null],[4,512,null,512]],queueVals:[256,2,2],levelDirQueue:["⬆️","⬇️","➡️"]},{startingGrid:[[256,null,null,512],[null,null,null,null],[512,256,null,null],[null,null,null,null]],queueVals:[512,2,2,2],levelDirQueue:["➡️","⬆️","⬅️","⬅️"]},{startingGrid:[[128,128,128,128],[128,128,128,128],[128,128,128,128],[128,128,128,null]],queueVals:[128,2,4,2],levelDirQueue:["➡️","⬆️","⬅️","⬇️"]},{startingGrid:[[512,512,2,null],[null,null,2,2],[null,null,2,2],[16,16,null,null]],queueVals:[2,2,1024,2],levelDirQueue:["⬇️","⬇️","⬅️","⬅️"]},{startingGrid:[[8,2,2,8],[2,2,2,2],[4,null,null,4],[1024,2,2,1024]],queueVals:[2,2,2,2],levelDirQueue:["⬅️","➡️","⬆️","⬅️"]},{startingGrid:[[null,null,null,null],[null,null,null,null],[null,null,null,null],[4,1024,64,512]],queueVals:[32,512,2,2],levelDirQueue:["⬆️","⬇️","➡️","⬅️"]},{startingGrid:[[256,null,null,256],[null,512,null,null],[null,null,512,null],[256,null,null,256]],queueVals:[2,2,2],levelDirQueue:["➡️","⬆️","⬆️"]},{startingGrid:[[null,null,null,256],[null,64,64,null],[null,4,512,null],[null,null,null,null]],queueVals:[2,128,4,1024,8],levelDirQueue:["⬅️","⬆️","➡️","⬇️","⬅️"]},{startingGrid:[[1024,512,256,128],[2,4,null,null],[4,null,null,null],[2,null,null,null]],queueVals:[128,2,2,2,2,4],levelDirQueue:["⬅️","➡️","⬇️","⬅️","⬅️","⬅️"]},{startingGrid:[[64,null,null,32],[2,128,256,null],[8,null,8,64],[1024,null,512,null]],queueVals:[256,4,256,2,2],levelDirQueue:["⬅️","⬆️","⬇️","➡️","➡️"]},{startingGrid:[[16,512,1024,4],[null,8,4,64],[null,4,8,32],[null,null,8,128]],queueVals:[2,4,32,512,2],levelDirQueue:["⬆️","⬅️","⬇️","⬆️","➡️"]},{startingGrid:[[1024,8,null,1024],[2,4,null,2],[4,8,null,4],[null,null,null,null]],queueVals:[8,8,2],levelDirQueue:["⬅️","⬇️","⬅️"]},{startingGrid:[[null,32,null,32],[32,512,1024,2],[null,null,512,null],[32,null,null,null]],queueVals:[32,64,128,2],levelDirQueue:["⬅️","⬆️","⬇️","➡️"]},{startingGrid:[[64,128,null,null],[4,128,64,null],[4,null,64,null],[32,8,null,64]],queueVals:[1024,512,256,64,64],levelDirQueue:["⬇️","➡️","⬆️","⬇️","⬅️"]},{startingGrid:[[4,null,null,32],[null,null,null,null],[256,128,64,32],[512,256,128,64]],queueVals:[32,2,1024,2,2,2],levelDirQueue:["➡️","⬇️","➡️","⬇️","⬅️","⬇️"]},{startingGrid:[[256,null,null,null],[null,2,null,null],[null,16,2,512],[512,16,4,4]],queueVals:[256,2,512,1024],levelDirQueue:["⬅️","⬆️","⬅️","⬆️"]},{startingGrid:[[128,null,128,null],[1024,null,1024,32],[256,null,256,16],[128,null,128,16]],queueVals:[2,4,2,4,2,4,2,4],levelDirQueue:["⬆️","⬇️","⬆️","⬇️","⬆️","⬇️","⬆️","➡️"]},{startingGrid:[[1024,16,null,1024],[8,8,null,null],[null,16,null,null],[null,null,null,null]],queueVals:[4,4,8,8,16,16],levelDirQueue:["⬆️","⬆️","⬆️","⬆️","⬇️","➡️"]},{startingGrid:[[8,2,null,64],[4,16,null,32],[2,128,null,16],[null,null,null,1024]],queueVals:[2,4,16,8,4,2,1024],levelDirQueue:["⬇️","⬇️","⬆️","⬇️","⬇️","⬇️","➡️"]},{startingGrid:[[128,null,null,null],[64,null,null,4],[64,null,null,2],[512,null,null,512]],queueVals:[8,512,256,2,2],levelDirQueue:["⬆️","⬇️","➡️","⬇️","⬅️"]},{startingGrid:[[128,null,64,null],[null,64,null,64],[64,null,128,null],[null,64,null,64]],queueVals:[64,512,256,64,1024,2],levelDirQueue:["⬆️","⬇️","➡️","⬇️","⬅️","⬆️"]},{startingGrid:[[8,null,256,256],[null,128,128,4],[null,128,null,null],[2,null,null,4]],queueVals:[128,2,256,2,256,1024],levelDirQueue:["⬅️","⬇️","➡️","⬇️","⬆️","⬅️"]},{startingGrid:[[4,128,null,64],[1024,512,128,64],[256,4,8,null],[null,null,2,2]],queueVals:[128,4,32,256,2,2,1024],levelDirQueue:["⬆️","⬇️","➡️","⬇️","⬅️","⬅️","⬅️"]}],c=a.length-1;document.getElementById("timer");const d=[],v=document.getElementById("queue-container");function g(){for(;d.length;)d.pop(),v.removeChild(v.firstChild)}function h(l){d.unshift(l);const e=document.createElement("div");e.innerHTML=l,e.setAttribute("data-val",l),e.classList.add("queue-cell"),v.appendChild(e)}function f(l){return l[Math.floor(l.length*Math.random())]}var m=n(157),L=n.n(m);const y=[[null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null]];function D(){document.getElementById("direction-queue").innerHTML=G.map((l=>`<div class="${l}">${L()}</div>`)).join("")}window.grid=y,document.querySelectorAll(".grid-cell").forEach((l=>l.addEventListener("click",(()=>{const n=l.getAttribute("data-r"),t=l.getAttribute("data-c");if(y[n][t])return;const u=function(){const l=d.pop();return l?(v.firstChild.classList.add("shrink"),v.firstChild.addEventListener("animationend",(()=>{v.removeChild(v.firstChild)}),{once:!0}),l):null}();u&&(y[n][t]=new e(u,n,t),setTimeout((()=>{const l=p[G.shift()]?.(y);o.currentLevel||(G.push(q()),h(b())),D(),!o.isClassicMode&&l&&function(){for(let l=0;l<y.length;l++)for(let e=0;e<y[0].length;e++)if(2048===y[l][e]?.val)return!0;return!1}()?o.completeCurrentLevel():function(){if(0===G.length)return!0;if(0===d.length)return!0;for(let l=0;l<y.length;l++)for(let e=0;e<y[0].length;e++)if(null===y[l][e])return!1;return!0}()&&document.getElementById("reset-btn").classList.add("pulse")}),0))}))));const p={L:function(l){let e=!1;for(let n=0;n<l.length;n++)for(let t=0;t<l[0].length;t++){let u,r=l[n][t];if(!r)continue;for(let i=t+1;i<l[0].length;i++){if(l[n][i]&&l[n][i]?.val===r.val){e=!0,u=l[n][i],l[n][i]=null,r.val=r.val+r.val,o.score+=r.val;break}if(l[n][i])break}let i=t;for(let u=t-1;u>=0&&!l[n][u];u--)e=!0,i=u;l[n][t]=null,l[n][i]=r,u?.setLoc(n,i),r?.setLoc(n,i),u?.setDirty()}return e},R:function(l){let e=!1;for(let n=0;n<l.length;n++)for(let t=l[0].length-1;t>=0;t--){let u,r=l[n][t];if(!r)continue;for(let i=t-1;i>=0;i--){if(l[n][i]&&l[n][i]?.val===r.val){e=!0,u=l[n][i],l[n][i]=null,r.val=r.val+r.val,o.score+=r.val;break}if(l[n][i])break}let i=t;for(let u=t+1;u<l[0].length&&!l[n][u];u++)e=!0,i=u;l[n][t]=null,l[n][i]=r,u?.setLoc(n,i),r?.setLoc(n,i),u?.setDirty()}return e},D:function(l){let e=!1;for(let n=0;n<l[0].length;n++)for(let t=l.length-1;t>=0;t--){let u,r=l[t][n];if(!r)continue;for(let i=t-1;i>=0;i--){if(l[i][n]&&l[i][n]?.val===r.val){e=!0,u=l[i][n],l[i][n]=null,r.val=r.val+r.val,o.score+=r.val;break}if(l[i][n])break}let i=t;for(let u=t+1;u<l.length&&!l[u][n];u++)e=!0,i=u;l[t][n]=null,l[i][n]=r,u?.setLoc(i,n),r?.setLoc(i,n),u?.setDirty()}return e},U:function(l){let e=!1;for(let n=0;n<l[0].length;n++)for(let t=0;t<l.length;t++){let u,r=l[t][n];if(!r)continue;for(let i=t+1;i<l.length;i++){if(l[i][n]&&l[i][n]?.val===r.val){e=!0,u=l[i][n],l[i][n]=null,r.val=r.val+r.val,o.score+=r.val;break}if(l[i][n])break}let i=t;for(let u=t-1;u>=0&&!l[u][n];u--)e=!0,i=u;l[t][n]=null,l[i][n]=r,u?.setLoc(i,n),r?.setLoc(i,n),u?.setDirty()}return e}},E={"⬅️":"L","➡️":"R","⬇️":"D","⬆️":"U"};function q(){return f(["L","L","R","R","D","D","D","U"])}function b(){return f([2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,64,64,64,64,64,64,64,64,128,128,128,128,256,256,512])}let G=[];function Q(){for(let l=0;l<y.length;l++)for(let e=0;e<y[0].length;e++)y[l][e]&&y[l][e].remove(),y[l][e]=null;!function(){const l=[];for(let e=0;e<y.length;e++)for(let n=0;n<y[0].length;n++)null===y[e][n]&&l.push([e,n]);if(0===l.length)return;const n=l[Math.floor(Math.random()*l.length)];y[n[0]][n[1]]=new e(2,n[0],n[1])}(),g(),h(b()),h(b()),h(b()),G=[q(),q(),q()],D()}function V(l,n,t){for(let n=0;n<y.length;n++)for(let t=0;t<y[0].length;t++)y[n][t]&&(y[n][t].remove(),y[n][t]=null),l[n][t]&&(y[n][t]=new e(l[n][t],n,t));g(),n.forEach((l=>h(l))),G=t.map((l=>E[l])),D()}Q()})()})();